<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
    <script src="https://d3js.org/d3.v4.min.js" charset="utf-8"></script>
    <script src="https://assets.crowd.aws/crowd-html-elements.js"></script>

    <style>
        html, body {
            margin: auto;
            width: 100%;
            height: 100%;
            min-height: 100%;
        }

        body {
            padding: 0;
            margin: auto;
            outline: none;
            font-family: Roboto, Arial, sans-serif;
            font-size: 18px;
            color: black;
            line-height: 20px;
        }

        crowd-text-area{
            font-size: 15px;
        }

        h1 {
            font-weight: 400;
        }

        form {
            width: 80%;
            height: 100%;
            margin: auto;
            padding: 10px;
        }

        input:hover, textarea:hover {
            outline: none;
            border: 1px solid #095484;
        }

        .tab {
            display: none;
        }

        .question {
            line-height: 0.5em;
            color: #095484;
            font-size: 25px;
        }

        .answer label {
            display: block;
            padding: 10px;
        }

        .answer input {
            width: auto;
        }

        .info {
            display: block;
        }

        textarea:invalid:focus {
            background-color: lightpink;
        }

        #paperFolding{
            display: grid;
            grid-template-columns: 35% 1fr;
            grid-row-gap: 80px;
            grid-column-gap: 80px;
            grid-auto-rows: 5px;
            max-width: 100%;
            height: auto;
        }

        #paperFolding img{
            background-size: auto;
            max-width: 100%;
            height: auto;
        }

        .choice {
            margin-top: 5px;
            grid-column: 2 / 3;
        }

        .guide {
            clear: left;
            float: left;
            grid-column: 1 / 2;
            margin-top: 7px;
            margin-left: 10px;
        }

        #paperFolding > div {
            height: 18px;
            margin-bottom: 2px;
        }

        .buttonA{
            margin-left: 10px;
            font-size: 15pt;
        }

        .buttonB {
            margin-left: 32px;
            font-size: 15pt;
        }

        .custom-control-inline{
            grid-column: 2 / 3;
            width: auto;
            max-height: 50px;
        }

        #paperFolding crowd-radio-group {
            width: 40em;
        }

        p{
            line-height: 1.8em;
        }

        .chartExplain {
            display: none;
        }

        .chartExplainText {
            display: none;
        }

    </style>
    <script>
        var done = false;
        var final_data;
        var worker_bin;

        var thisCase;
        var yMin1 = 0;
        var yMin2 = 0;
        var yMin3 = 0;
        var yMax2 = 100;
        var yMax3 = 100;

        String.prototype.hashCode = function() {
            var hash = 0;
            if (this.length == 0) {
                return hash;
            }
            for (var i = 0; i < this.length; i++) {
                var char = this.charCodeAt(i);
                hash = ((hash<<5)-hash)+char;
                hash = hash & hash; // Convert to 32bit integer
            }
            return hash>>>0;
        };

        function showStimuli() {
            // RETRIEVE URL
            var fullurl = new String();

            // THIS IS THE LINE TO CAPTURE THE ACTUAL URL:
            var fullurl = document.location.href;
            console.log(fullurl);

            // SPLITS THE URL
            var bits = new Array();
            bits = fullurl.split("?");
            worker_bin = -1;
            if (bits.length > 1) {
                parameters = bits[1].split("&");

                // ASSIGNS THE URL PARAMETERS TO JAVASCRIPT VARIABLES
                var assign = parameters[0].split("=")[1];
                var hit = parameters[1].split("=")[1];
                var worker = parameters[2].split("=")[1];
                // MAP TO CONDITION
                worker_bin = worker.hashCode() % 6;
                console.log(worker);
                console.log(worker.hashCode());
            }

            if (worker_bin == 0) {
                thisCase = "normal";
            } else if (worker_bin == 1) {
                thisCase = "predictOnly";
            } else if (worker_bin == 2) {
                thisCase = "explainOnly";
            } else if (worker_bin == 3) {
                thisCase = "predictExplain";
            } else {
                yMin1 = 50;
                yMin2 = 2;
                yMin3 = 20;
                yMax2 = 50;
                yMax3 = 70;
                if (worker_bin == 4) {
                    thisCase = "misleading";
                }
                else{
                    thisCase = "misleadPE";
                }
            }
            console.log(thisCase);

            if (thisCase == "predictExplain" || thisCase == "misleadPE") {
                $(document).ready(function(){
                    $(".chartExplain, .chartExplainText").show();
                });
            }

            if (thisCase == "predictOnly") {
                $(document).ready(function(){
                    $(".chartExplainText").show();
                });
            }

            if (thisCase == "explainOnly" ) {
                $(document).ready(function(){
                    $(".chartExplain").show();
                });
            }
        }

        showStimuli();

        function drawDraggableBar(data, draggable, element, toDrag, yMin, yMax) {
            var barHeight = (height/data.length) * 0.8;
            done = false;

            $(element).empty();

            // set the dimensions and margins of the graph
            var margin = {top: 20, right: 20, bottom: 30, left: 40};
            var width = 800 - margin.left - margin.right;
            var height = 500 - margin.top - margin.bottom;

            // create the svg object and append it to the barChart section of the page
            var svg = d3.select(element).append("svg")
                .attr("width", width + margin.left + margin.right)
                .attr("height", height + margin.top + margin.bottom)
                .append("g")
                .attr("transform",
                    "translate(" + margin.left + "," + margin.top + ")");

            // set the ranges
            var xScale = d3.scaleBand()
                .range([0, width])
                .paddingInner(0.1)
                .paddingOuter(0.3);

            var yScale = d3.scaleLinear()
                .range([height, 0]);

            //var yScale = d3.scaleLog().base(2).domain([yMin, yMax]).range([height,0]);

            yScale.domain([yMin, yMax]);

            var yAxis = d3.axisLeft(yScale).ticks(10);

            // get the data
            data.forEach(function (d) {
                d.value = +d.value;
            });

            // Scale the range of the data in the domains
            xScale.domain(data.map(function (d) {
                return d.label;
            }));

            // add x Axis
            svg.append("g")
                .style("font", "20px times")
                .attr("transform", "translate(0," + height + ")")
                .call(d3.axisBottom(xScale));

            // add y Axis
            svg.append("g")
                .style("font", "18px times")
                .call(yAxis);

            // append the rectangles for the bar chart
            var bars = svg.selectAll(".bar")
                .data(data).enter();

            bars.append("rect")
                .attr("class", "bar")
                .attr('fill', function(d) {
                    if (d.label == toDrag){
                        return 'orange';
                    }
                    return 'steelblue';
                })
                .attr("x", function (d) {
                    return xScale(d.label);
                })
                .attr("width", xScale.bandwidth())
                .attr("y", function (d) {
                    return yScale(d.value);
                })
                .attr("height", function (d) {
                    return height - yScale(d.value)})
                .attr('class', function(d) {
                    return "drag-bar-" + d.label;});

            bars
                .append('text')
                .attr('class', 'barText')
                .attr('x', function(d){return xScale(d.label) + xScale.bandwidth()/2})
                .attr('y', function(d){return yScale(d.value) - 8})
                .attr('fill', 'black')
                .attr("text-anchor", "middle")
                .text(function(d){return d.value});

            if (draggable){
                bars.append("line")
                    .attr('x1', function (d) {
                        if (d.label == toDrag || toDrag == ""){
                            return xScale(d.label);
                        }})
                    .attr('x2', function (d) {
                        if (d.label == toDrag || toDrag == ""){
                            return xScale(d.label)+xScale.bandwidth();
                        }})
                    .attr('y1', function(d) {
                        if (d.label == toDrag || toDrag == ""){
                            return yScale(d.value);}})
                    .attr('y2', function(d) {
                        if (d.label == toDrag || toDrag == ""){
                            return yScale(d.value);}})
                    .style('stroke', 'black')
                    .style('stroke-width', '7')
                    .style("cursor", "grab")
                    .call(d3.drag()
                        .on("start", function(d){
                            d3.select(this).raise().classed("active", true)
                                .style("cursor", "grabbing");
                        })
                        .on("drag", function(d){
                            if (yScale.invert(d3.event.y).toFixed(0) <= yMax){
                                d3.select(this)
                                    .attr("y1",d3.event.y)
                                    .attr("y2",d3.event.y);
                            }
                        })
                        .on("end", function(d){
                            var newY = yScale.invert(d3.event.y).toFixed(0);
                            if (newY <= yMax && newY > 0) {
                                d.value = newY;
                                drawDraggableBar(data, true, element, toDrag, yMin ,yMax);
                            }
                            else{
                                drawDraggableBar(data, true, element, toDrag, yMin ,yMax);
                            }
                        }));
            }

            final_data = JSON.parse(JSON.stringify(data));
            console.log(data);
        }

        var data1 = [
            {value: 79, label: "Australia "},
            {value: 87, label: "Belgium"},
            {value: 62, label: "Canada"},
            {value: yMin1, label: "United States"}];

        var data2 = [
            {value: 4, label: "Education & Science"},
            {value: 27, label: "Health"},
            {value: 16, label: "Military"},
            {value: yMin2, label: "Social Security"}];

        var data3 = [{value: 57, label: "Accident"},
            {value: 27, label: "Alzheimer"},
            {value: 31, label: "Suicide"},
            {value: yMin3, label: "Drug"}];

        var currentTab = 0; // Current tab is set to be the first tab (0)
        var tabs = document.getElementsByClassName(thisCase);

        function showTab(n) {
            console.log(n);
            if (n==1){
                $(document).ready(function(){
                    $("#nextBtn").show();
                });
                document.getElementById("bin").value = worker_bin;

                drawDraggableBar(data1, true, "#barChart1", "United States", yMin1, 100);
                drawDraggableBar(data2, true, "#barChart2", "Social Security", yMin2, yMax2);
                drawDraggableBar(data3, true, "#barChart3", "Drug", yMin3, yMax3);

                if (thisCase == "normal" || thisCase == "misleading" || thisCase == "explainOnly"){
                    data1.pop();
                    data1.push({value: 57, label: "United States"});
                    drawDraggableBar(data1, false, "#barChart1_explain", "United States", yMin1, 100);

                    data2.pop();
                    data2.push({value: 33, label: "Social Security"});
                    drawDraggableBar(data2, false, "#barChart2_explain", "Social Security", yMin2, yMax2);

                    data3.pop();
                    data3.push({value: 53, label: "Drug"});
                    drawDraggableBar(data3, false, "#barChart3_explain", "Drug", yMin3, yMax3);
                    final_data = [];
                }
            }

            // This function will display the specified tab of the form ...
            tabs[n].style.display = "block";

            if (n == (tabs.length - 1)) {
                var button = document.getElementById("nextBtn");
                if (button != null) {
                    button.style.display = "none";
                }
            }
        }

        var timer = false;
        var t;
        function nextTab() {

            var thisTab = tabs[currentTab];

            if (timer){
                clearTimeout(t);
                timer = false;
            }

            if (checkPredict(thisTab)){
                // Hide the current tab:
                tabs[currentTab].style.display = "none";

                // Increase or decrease the current tab by 1:
                currentTab = currentTab + 1;

                if (thisTab.getElementsByClassName("guidepf").length != 0) {
                    timer = true;
                    startTimer(3);
                }

                if (currentTab == tabs.length - 2){
                    document.getElementById("")
                }

                // Otherwise, display the correct tab;
                $('html,body').scrollTop(0);
                showTab(currentTab);
            }
        }

        function startTimer(minutes) {
            var seconds = 60;
            var mins = minutes;

            if (minutes == 0) {
                nextTab();
            }
            else {
                tick();
            }

            function tick() {
                //This script expects an element with an ID = "counter". You can change that to what ever you want.
                var counter = document.getElementById("countdown");
                var current_minutes = mins - 1;
                seconds--;
                counter.innerHTML = current_minutes.toString() + ":" + (seconds < 10 ? "0" : "") + String(seconds);
                if (seconds > 0) {
                    t = setTimeout(tick, 1000);
                } else {
                    startTimer(mins - 1);
                }
            }
        }

        function checkPredict(thisTab) {
            //return true;
            if (thisTab.getElementsByClassName("check").length != 0) {
                if (final_data.length < 4) {
                    errorBox.innerHTML = '<crowd-alert type="error" dismissible>Please make your guess.</crowd-alert>';
                    errorBox.scrollIntoView();
                    return false;
                }

                else if (final_data[0].value == 0 || final_data[1].value == 0 || final_data[2].value == 0 || final_data[3].value == 0) {
                    errorBox.innerHTML = '<crowd-alert type="error" dismissible>Please make your guess.</crowd-alert>';
                    errorBox.scrollIntoView();
                    return false;
                }
                else {
                    if (thisCase == "predictOnly" || thisCase == "predictExplain" || thisCase == "misleadPE"){
                        final_data[3].label = "Your Prediction";
                        if (currentTab == 2) {
                            if (thisCase == "misleadPE" && final_data[3].value == yMin1){
                                errorBox.innerHTML = '<crowd-alert type="error" dismissible>Please make your guess.</crowd-alert>';
                                errorBox.scrollIntoView();
                                return false;
                            }

                            document.getElementById("predict1").value = final_data[3].value;
                            var item = {value: 57, label: "United States"};
                            final_data.splice(3, 0, item);
                            drawDraggableBar(final_data, false, "#barChart1_explain", "Your Prediction", yMin1,100);
                        }

                        if (currentTab == 3) {
                            if (thisCase == "misleadPE" && final_data[3].value == yMin2){
                                errorBox.innerHTML = '<crowd-alert type="error" dismissible>Please make your guess.</crowd-alert>';
                                errorBox.scrollIntoView();
                                return false;
                            }
                            document.getElementById("predict2").value = final_data[3].value;
                            var item = {value: 33, label: "Social Security"};
                            final_data.splice(3, 0, item);

                            drawDraggableBar(final_data, false, "#barChart2_explain", "Your Prediction", yMin2,yMax2);

                        }

                        if (currentTab == 4) {
                            if (thisCase == "misleadPE" && final_data[3].value == yMin3){
                                errorBox.innerHTML = '<crowd-alert type="error" dismissible>Please make your guess.</crowd-alert>';
                                errorBox.scrollIntoView();
                                return false;
                            }
                            document.getElementById("predict3").value = final_data[3].value;
                            var item = {value: 53, label: "Drug"};
                            final_data.splice(3, 0, item);

                            drawDraggableBar(final_data, false, "#barChart3_explain", "Your Prediction", yMin3,yMax3);
                        }
                    }

                    if (thisTab.getElementsByClassName("text_recall1").length != 0){
                        document.getElementById("australia").value = final_data[0].value;
                        document.getElementById("belgium").value = final_data[1].value;
                        document.getElementById("canada").value = final_data[2].value;
                        document.getElementById("usa").value = final_data[3].value;
                    }
                    else if (thisTab.getElementsByClassName("text_recall2").length != 0){
                        document.getElementById("education").value = final_data[0].value;
                        document.getElementById("health").value = final_data[1].value;
                        document.getElementById("military").value = final_data[2].value;
                        document.getElementById("socialsecurity").value = final_data[3].value;
                    }
                    else if (thisTab.getElementsByClassName("text_recall3").length != 0){
                        document.getElementById("accident").value = final_data[0].value;
                        document.getElementById("alzheimer").value = final_data[1].value;
                        document.getElementById("suicide").value = final_data[2].value;
                        document.getElementById("drug").value = final_data[3].value;
                    }
                    final_data = [];
                }
            }
            else if (thisTab.getElementsByClassName("explain").length != 0) {
                if (thisCase == "explainOnly" || thisCase == "predictExplain" || thisCase == "misleadPE") {
                    console.log(thisTab.getElementsByClassName("explain")[0].value);

                    if (thisTab.getElementsByClassName("explain")[0].value == undefined ||
                        thisTab.getElementsByClassName("explain")[0].value.length < 50 ) {
                        console.log('yes');
                        errorBox.innerHTML = '<crowd-alert type="error" dismissible>Please type some explanation to the box</crowd-alert>';
                        errorBox.scrollIntoView();
                        return false;
                    }
                }
            }

            return true;
        }
    </script>

</head>

<body>
<div id="errorBox"></div>
<crowd-form id = "survey" answer-format="flatten-objects">
    <div class="tab normal predictOnly explainOnly predictExplain misleading misleadPE info">
        <h1>General Information</h1><br>
        <div class = "info" style="font-size: 20px">
            In this experience, we will ask you to examine and recall 3 graphs on the following topics:

            <ol>
                <li>Voting Turnout across Developed Countries.</li><br>
                <li>US National Spending in 2015.</li><br>
                <li>Leading Death Causes in the United States.</li><br>
            </ol>

            <p>The HIT should take no more than 20 minutes, and you will be paid $3 upon completion.</p>

            <strong>Your mouse must be working in order to complete the tasks in this HIT.</strong>

            <br><br>
            <p>
                This experiment is a part of a research project, and we are interested in how well you can complete the tasks
                without any help.
                <strong><u>Please do NOT use any other resources</u></strong> (such as Google search, etc.) or hit
                the back button in your browser at any point during the survey. The reward is the same
                regardless of your performance.
            </p>

            <p>
                Your Mechanical Turk Worker ID will be used to place you to a random condition and
                will not be stored with the research data we collect from you.
                Any reports and presentations about the
                findings from this study will not include your name or any
                other information that could identify you. We may share the
                data we collect in this study with other researchers doing
                future studies - if we share your data, we will not include
                information that could identify you.
            </p>

            <p>
                Please click "I agree" to indicate that you are at least 18
                years old, have read this page, and agree to participate in
                our research study.
            </p>
            <p>
                You can contact Minh Le by email at
                lem@union.edu or by phone at 518-253-1182, if you have
                any questions or concerns.
            </p>

            <script>
                showTab(0);
                $(document).ready(function(){
                    $("#nextBtn").hide();
                });
            </script>
        </div>
        <div style="overflow:auto">
            <div style="float:right;">
                <crowd-button id="consent" onclick="nextTab()">I agree</crowd-button>
            </div>
        </div>


    </div>

    <div class="tab predictOnly predictExplain misleadPE" >
        <h2>PREDICTION TASK </h2>
        <p style="font-size: 25px">In this task, you will be asked to predict the value of the last column.
            Move your mouse to the black line and drag it to a desired position.</p>
    </div>

    <! –– PREDICTION -->
    <div class="tab predictOnly predictExplain misleadPE">
        <h1>Voting Turnout By Country</h1>
        <p>The graphs below shows the percentage of eligible voters who voted in the most recent election.</p>

        Instruction: Move your mouse over the black line and then drag it up and down to adjust the height of the bar. <br><br>

        ***Do <strong>NOT</strong> search for the answer, just make your best guess***
        <br>

        <div class = "check" id = "barChart1"></div>
    </div>


    <div class="tab predictOnly predictExplain misleadPE">
        <h1> US National Budget Breakdown </h1>
        <p>The graphs below shows the percentage of total spending on major categories for fiscal year 2015.</p>

        Instruction: Move your mouse over the black line and then drag it up and down to adjust the height of the bar. <br><br>

        ***Do <strong>NOT</strong> search for the answer, just make your best guess***
        <br>

        <div class = "check" id = "barChart2"></div>
    </div>

    <div class="tab predictOnly predictExplain misleadPE">
        <h1>Change in Death Rate by Causes</h1>
        <p> The graphs below shows the percentage change in death rates for Wisconsin by causes (2005-2015)</p>

        Instruction: Move your mouse over the black line and then drag it up and down to adjust the height of the bar. <br><br>

        ***Do <strong>NOT</strong> search for the answer, just make your best guess***
        <br>

        <div class = "check" id = "barChart3"></div>
    </div>

    <! –– SELF-EXPLANATION -->
    <div class="tab normal misleading" >
        <h2>EXAMINE THE DATA</h2>
        <p style="font-size: 25px"> Here, you will examine three sets of graphs.</p>
        <p style="font-size: 25px">
            You will <strong><u>NOT</u> be allowed to go back</strong>, so please examine the graphs carefully before moving on.
        </p>
        <br><br>
    </div>


    <div class="tab explainOnly predictExplain misleadPE predictOnly" >

        <h2>SELF-EXPLANATION</h2>
        <p style="font-size: 25px"> Here, you will review the true dataset and provide some explanations.</p>
        <p style="font-size: 25px">
            You will <strong><u>NOT</u> be allowed to go back</strong>, so please examine the graphs carefully before moving on.
        </p>
        <br><br>
    </div>

    <div class="tab predictOnly explainOnly predictExplain misleadPE normal misleading" >
        <h2>Voting Turnout By Country</h2>
        <p>The graphs below shows the percentage of eligible voters who voted in the most recent election.</p>
        <p>Pay attention to the <strong>ORANGE</strong> bar.</p>

        <p class="chartExplainText">You have previously made prediction for the <bold>United States.</bold></p><br>

        <div id = "barChart1_explain">
        </div><br><br>


        <div class = "chartExplain">
            <p>You will now write a few sentences on whether the true data matches your expectation. For example, think <br>
                1. How many % is your expectation away from true value? <br>
                2. Why you might have been wrong?
            </p>
            <crowd-text-area name="explain1" class="explain" rows="10" cols="50" char-counter auto-focus></crowd-text-area>
            <p>*Minimum 50 characters.</p>
        </div>

    </div>

    <div class="tab predictOnly explainOnly predictExplain misleading normal misleadPE" >
        <h2> US National Budget Breakdown </h2>
        <p>The graphs below shows the percentage of total spending on major categories for fiscal year 2015.</p>
        <p>Pay attention to the <strong>ORANGE</strong> bar.</p>

        <p class="chartExplainText">You have previously made prediction for <bold>Social Security.</bold></p>

        <div id = "barChart2_explain">
        </div><br><br>

        <crowd-input style="visibility: hidden;" name="bin" id="bin" value=""></crowd-input>
        <div class = "chartExplain">
            <p>You will now write a few sentences on whether the true data matches your expectation. For example, think <br>
                1. How many % is your expectation away from true value? <br>
                2. Why you might have been wrong?
            </p>
            <crowd-text-area name="explain2" class="explain" rows="10" cols="50" char-counter auto-focus></crowd-text-area>
            <p>*Minimum 50 characters.</p>
        </div>
    </div>

    <div class="tab predictOnly explainOnly predictExplain misleadPE normal misleading" >
        <h2>Change in Death Rate by Causes</h2>
        <p> The graphs below shows the percentage change in death rates for Wisconsin by causes (2005-2015).</p>
        <p>Pay attention to the <strong>ORANGE</strong> bar.</p>

        <p class="chartExplainText">You have previously made prediction for <bold>Drug Overdose</bold>.</p>

        <div id = "barChart3_explain"></div><br><br>
        <div class = "chartExplain">
            <p>You will now write a few sentences on whether the true data matches your expectation. For example, think <br>
                1. How many % is your expectation away from true value? <br>
                2. Why you might have been wrong?
            </p>

            <crowd-text-area name="explain3" class="explain" rows="10" cols="50" char-counter auto-focus></crowd-text-area>
            <p>*Minimum 50 characters.</p>
        </div>
    </div>


    <! –– PAPER FOLDING -->
    <div class="tab normal predictOnly explainOnly predictExplain misleading misleadPE">
        <h1 class = "guidepf">Paper Folding</h1>
        <p>You will now complete a paper folding task. Please read the instructions and do your best.</p>

        <p>You have 3 minutes to complete 10 questions. <b> Your answer will be automatically submitted after 3 minutes. </b> </p>

        <p>
            In this test you are to imagine the folding and unfolding of pieces of paper.

            After the paper is folded, one hole will be punched using a pencil. You will guess where these holes will locate on the paper
            if it is unfolded to the original form. An example is given below:
        </p>
        <br>
        <img src="https://image2020.s3.us-east-2.amazonaws.com/pf2.png" style="display:block; margin-left: auto; margin-right: auto">
        <br>


        <p>
            In each problem in the test there are some figures drawn at the left of a vertical line and there are others drawn at the right
            of the line. The figures at the left represent a square piece of paper being folded, and the last of
            these figures has one or two small circles drawn on it to show where the paper has been punched.
            Each hole is punched through all the thicknesses of paper at that point. One of the five figures on
            the right of the vertical line shows where the holes will be when the paper is completely unfolded.
            You are to decide which one of these figures is correct.

            The sample below shows how the test will look like. The correct answer to the sample problem is C.
        </p>

        <br>
        <img src="https://image2020.s3.us-east-2.amazonaws.com/pf1.png" style="display:block; margin-left: auto; margin-right: auto">
        <br>

        <p>
            In these problems all of the folds that are made are shown in the figures at the left of the line, and
            the paper is not turned or moved in any way except to make the folds shown in the figures.
            Remember, the answer is the figure that shows the positions of the holes when the paper is
            completely unfolded.
        </p>

        <p>If you are ready, click "Next" button to start.</p>

    </div>

    <div class="tab normal predictOnly explainOnly predictExplain misleading misleadPE"">
    <div id="countdown" style="font-size: 70px; text-align: center; margin-top:15px; height: 75px; "></div>
    <p>You may want to zoom in or out your window to view all buttons.</p>

    <div id ="paperFolding">
        <img class="guide" src="https://image2020.s3.us-east-2.amazonaws.com/guide1.png">
        <img class="choice" src="https://image2020.s3.us-east-2.amazonaws.com/choice1.png">
        <div class="custom-control-inline">
            <crowd-radio-group>
                <crowd-radio-button name="pf1A" value="A" class="buttonA"/> A</crowd-radio-button>
                <crowd-radio-button name="pf1B" value="B" class="buttonB"/> B</crowd-radio-button>
                <crowd-radio-button name="pf1C" value="C" class="buttonB"/> C</crowd-radio-button>
                <crowd-radio-button name="pf1D" value="D" class="buttonB"/> D</crowd-radio-button>
                <crowd-radio-button name="pf1E" value="E" class="buttonB"/> E</crowd-radio-button>
                <crowd-radio-button name="pf1F" value="na" class="buttonB"/> Don't know</crowd-radio-button>
            </crowd-radio-group>
        </div>


        <img class="guide" src="https://image2020.s3.us-east-2.amazonaws.com/guide2.png">
        <img class="choice" src="https://image2020.s3.us-east-2.amazonaws.com/choice2.png">
        <div class="custom-control-inline">
            <crowd-radio-group>
                <crowd-radio-button name="pf2A" value="A" class="buttonA"/> A</crowd-radio-button>
                <crowd-radio-button name="pf2B" value="B" class="buttonB"/> B</crowd-radio-button>
                <crowd-radio-button name="pf2C" value="C" class="buttonB"/> C</crowd-radio-button>
                <crowd-radio-button name="pf2D" value="D" class="buttonB"/> D</crowd-radio-button>
                <crowd-radio-button name="pf2E" value="E" class="buttonB"/> E</crowd-radio-button>
                <crowd-radio-button name="pf2F" value="na" class="buttonB"/> Don't know</crowd-radio-button>
            </crowd-radio-group>
        </div>

        <img class="guide" src="https://image2020.s3.us-east-2.amazonaws.com/guide3.png">
        <img class="choice" src="https://image2020.s3.us-east-2.amazonaws.com/choice3.png">
        <div class="custom-control-inline">
            <crowd-radio-group>
                <crowd-radio-button name="pf3A" value="A" class="buttonA"/> A</crowd-radio-button>
                <crowd-radio-button name="pf3B" value="B" class="buttonB"/> B</crowd-radio-button>
                <crowd-radio-button name="pf3C" value="C" class="buttonB"/> C</crowd-radio-button>
                <crowd-radio-button name="pf3D" value="D" class="buttonB"/> D</crowd-radio-button>
                <crowd-radio-button name="pf3E" value="E" class="buttonB"/> E</crowd-radio-button>
                <crowd-radio-button name="pf3F" value="na" class="buttonB"/> Don't know</crowd-radio-button>
            </crowd-radio-group>
        </div>


        <img class="guide" src="https://image2020.s3.us-east-2.amazonaws.com/guide4.png">
        <img class="choice" src="https://image2020.s3.us-east-2.amazonaws.com/choice4.png">
        <div class="custom-control-inline">
            <crowd-radio-group>
                <crowd-radio-button name="pf4A" value="A" class="buttonA"/> A</crowd-radio-button>
                <crowd-radio-button name="pf4B" value="B" class="buttonB"/> B</crowd-radio-button>
                <crowd-radio-button name="pf4C" value="C" class="buttonB"/> C</crowd-radio-button>
                <crowd-radio-button name="pf4D" value="D" class="buttonB"/> D</crowd-radio-button>
                <crowd-radio-button name="pf4E" value="E" class="buttonB"/> E</crowd-radio-button>
                <crowd-radio-button name="pf4F" value="na" class="buttonB"/> Don't know</crowd-radio-button>
            </crowd-radio-group>
        </div>

        <img class="guide" src="https://image2020.s3.us-east-2.amazonaws.com/guide5.png">
        <img class="choice" src="https://image2020.s3.us-east-2.amazonaws.com/choice5.png">
        <div class="custom-control-inline">
            <crowd-radio-group>
                <crowd-radio-button name="pf5A" value="A" class="buttonA"/> A</crowd-radio-button>
                <crowd-radio-button name="pf5B" value="B" class="buttonB"/> B</crowd-radio-button>
                <crowd-radio-button name="pf5C" value="C" class="buttonB"/> C</crowd-radio-button>
                <crowd-radio-button name="pf5D" value="D" class="buttonB"/> D</crowd-radio-button>
                <crowd-radio-button name="pf5E" value="E" class="buttonB"/> E</crowd-radio-button>
                <crowd-radio-button name="pf5F" value="na" class="buttonB"/> Don't know</crowd-radio-button>
            </crowd-radio-group>
        </div>

        <img class="guide" src="https://image2020.s3.us-east-2.amazonaws.com/guide6.png">
        <img class="choice" src="https://image2020.s3.us-east-2.amazonaws.com/choice6.png">
        <div class="custom-control-inline">
            <crowd-radio-group>
                <crowd-radio-button name="pf6A" value="A" class="buttonA"/> A</crowd-radio-button>
                <crowd-radio-button name="pf6B" value="B" class="buttonB"/> B</crowd-radio-button>
                <crowd-radio-button name="pf6C" value="C" class="buttonB"/> C</crowd-radio-button>
                <crowd-radio-button name="pf6D" value="D" class="buttonB"/> D</crowd-radio-button>
                <crowd-radio-button name="pf6E" value="E" class="buttonB"/> E</crowd-radio-button>
                <crowd-radio-button name="pf6F" value="na" class="buttonB"/> Don't know</crowd-radio-button>
            </crowd-radio-group>
        </div>

        <img class="guide" src="https://image2020.s3.us-east-2.amazonaws.com/guide7.png">
        <img class="choice" src="https://image2020.s3.us-east-2.amazonaws.com/choice7.png">
        <div class="custom-control-inline">
            <crowd-radio-group>
                <crowd-radio-button name="pf7A" value="A" class="buttonA"/> A</crowd-radio-button>
                <crowd-radio-button name="pf7B" value="B" class="buttonB"/> B</crowd-radio-button>
                <crowd-radio-button name="pf7C" value="C" class="buttonB"/> C</crowd-radio-button>
                <crowd-radio-button name="pf7D" value="D" class="buttonB"/> D</crowd-radio-button>
                <crowd-radio-button name="pf7E" value="E" class="buttonB"/> E</crowd-radio-button>
                <crowd-radio-button name="pf7F" value="na" class="buttonB" checked/> Don't know</crowd-radio-button>
            </crowd-radio-group>
        </div>

        <img class="guide" src="https://image2020.s3.us-east-2.amazonaws.com/guide8.png">
        <img class="choice" src="https://image2020.s3.us-east-2.amazonaws.com/choice8.png">
        <div class="custom-control-inline">
            <crowd-radio-group>
                <crowd-radio-button name="pf8A" value="A" class="buttonA"/> A</crowd-radio-button>
                <crowd-radio-button name="pf8B" value="B" class="buttonB"/> B</crowd-radio-button>
                <crowd-radio-button name="pf8C" value="C" class="buttonB"/> C</crowd-radio-button>
                <crowd-radio-button name="pf8D" value="D" class="buttonB"/> D</crowd-radio-button>
                <crowd-radio-button name="pf8E" value="E" class="buttonB"/> E</crowd-radio-button>
                <crowd-radio-button name="pf8F" value="na" class="buttonB" checked/> Don't know</crowd-radio-button>
            </crowd-radio-group>
        </div>

        <img class="guide" src="https://image2020.s3.us-east-2.amazonaws.com/guide9.png">
        <img class="choice" src="https://image2020.s3.us-east-2.amazonaws.com/choice9.png">
        <div class="custom-control-inline">
            <crowd-radio-group>
                <crowd-radio-button name="pf9A" value="A" class="buttonA"/> A</crowd-radio-button>
                <crowd-radio-button name="pf9B" value="B" class="buttonB"/> B</crowd-radio-button>
                <crowd-radio-button name="pf9C" value="C" class="buttonB"/> C</crowd-radio-button>
                <crowd-radio-button name="pf9D" value="D" class="buttonB"/> D</crowd-radio-button>
                <crowd-radio-button name="pf9E" value="E" class="buttonB"/> E</crowd-radio-button>
                <crowd-radio-button name="pf9F" value="na" class="buttonB" checked/> Don't know</crowd-radio-button>
            </crowd-radio-group>
        </div>

        <img class="guide" src="https://image2020.s3.us-east-2.amazonaws.com/guide10.png">
        <img class="choice" src="https://image2020.s3.us-east-2.amazonaws.com/choice10.png">
        <div class="custom-control-inline">
            <crowd-radio-group>
                <crowd-radio-button name="pf10A" value="A" class="buttonA"/> A</crowd-radio-button>
                <crowd-radio-button name="pf10B" value="B" class="buttonB"/> B</crowd-radio-button>
                <crowd-radio-button name="pf10C" value="C" class="buttonB"/> C</crowd-radio-button>
                <crowd-radio-button name="pf10D" value="D" class="buttonB"/> D</crowd-radio-button>
                <crowd-radio-button name="pf10E" value="E" class="buttonB"/> E</crowd-radio-button>
                <crowd-radio-button name="pf10F" value="na" class="buttonB" checked/> Don't know</crowd-radio-button>
            </crowd-radio-group>
        </div>
    </div>
    <br><br><br>
    </div>

    <! –– RECALL -->
    <div class="tab normal predictOnly explainOnly predictExplain misleading misleadPE" >
        <h2>RECALL DATA</h2>
        <p style="font-size: 25px">Finally, here we ask you to recall the graphs you have viewed before. <br>
            Please try to make your best guess by dragging the black line up and down the charts. <br>

            <strong>***Do NOT hit the back button in your browser as you will lose all your work***</strong>
        </p>
        <br><br>
    </div>

    <div class="tab normal predictOnly explainOnly predictExplain misleading misleadPE">
        <h2>Voting Turnout By Country</h2>
        <p>The graphs below shows the percentage of eligible voters who voted in the most recent election.</p>

        <p class = "text_recall1">
            Instruction: Move your mouse over the black line and then drag it up and down to adjust the height of the bar.
            You will need to adjust ALL bars before moving on to the next tab. <br>

            ***Do <strong>NOT</strong> search for the answer, just make your best guess***<br>

        </p><br>


        <div class = "check" id = "barchart_recall1">
            <script>
                var recall_data1 = [{value: 0, label: "Australia "}, {value: 0, label: "Belgium"}, {value: 0, label: "Canada"}, {value: 0, label: "United States"}];
                drawDraggableBar(recall_data1, true, "#barchart_recall1", "", 0, 100);
            </script>

        </div>
    </div>

    <div class="tab normal predictOnly explainOnly predictExplain misleading misleadPE">
        <h2> US National Budget Breakdown </h2>
        <p>The graphs below shows the percentage of federal spending on major categories.</p>

        <p class = "text_recall2">
            Instruction: Move your mouse over the black line and then drag it up and down to adjust the height of the bar.
            You will need to adjust ALL bars before moving on to the next tab. <br>

            ***Do <strong>NOT</strong> search for the answer, just make your best guess***<br>

        </p><br>

        <div class = "check" id = "barchart_recall2">
            <script>
                var recall_data2 = [{value: 0, label: "Education & Science"}, {value: 0, label: "Health"}, {value: 0, label: "Military"}, {value: 0, label: "Social Security"}];
                drawDraggableBar(recall_data2, true, "#barchart_recall2", "", 0, 100);
            </script>
        </div>
    </div>

    <div class="tab normal predictOnly explainOnly predictExplain misleading misleadPE">
        <h2>Change in Death Rate by Causes</h2>
        <p> The graphs below shows the percentage change in death rates for Wisconsin by causes for period of 2005-2015</p>
        <p class = "text_recall3">
            Instruction: Move your mouse over the black line and then drag it up and down to adjust the height of the bar.
            You will need to adjust ALL bars before moving on to the next tab. <br>

            ***Do <strong>NOT</strong> search for the answer, just make your best guess***<br>
        </p><br>

        <div class = "check" id = "barchart_recall3">
            <script>
                var recall_data3 = [{value: 0, label: "Accident"}, {value: 0, label: "Alzheimer"}, {value: 0, label: "Suicide"}, {value: 0, label: "Drug"}];
                drawDraggableBar(recall_data3, true, "#barchart_recall3", "", 0, 100);

            </script>
        </div>
    </div>

    <div class = "tab normal predictOnly explainOnly predictExplain misleading misleadPE" style="margin: 50px">
        <h1 style="text-align: center; font-weight: bold;">Demographic Survey</h1>
        <p>Thank you for completing the tasks. Please provide some basic information about yourself.</p>

        <p class="question">Gender</p>
        <div class="answer gender">
            <crowd-radio-group>
                <crowd-radio-button value="female" name="female" /> Female</crowd-radio-button>
                <crowd-radio-button value="male" name="male" /> Male</crowd-radio-button>
                <crowd-radio-button value="other" name="genderOther"/> Other</crowd-radio-button>
            </crowd-radio-group>
        </div>

        <p class="question">Age</p>
        <div class="answer age">
            <crowd-radio-group>
                <crowd-radio-button value="age1" name="age1"/> 18-24 years old</crowd-radio-button>
                <crowd-radio-button value="age2" name="age2" /> 25-34 years old</crowd-radio-button>
                <crowd-radio-button value="age3" name="age3" /> 34-44 years old</crowd-radio-button>
                <crowd-radio-button value="age4" name="age4" /> 44-54 years old</crowd-radio-button>
                <crowd-radio-button value="age5" name="age5" /> 55+ years old</crowd-radio-button>
            </crowd-radio-group>
        </div>

        <p class="question">Ethnicity</p>
        <div class="answer ethnic">
            <crowd-radio-group>
                <crowd-radio-button value="white" name="white" /> White</crowd-radio-button>
                <crowd-radio-button value="black" name="black" /> Black</crowd-radio-button>
                <crowd-radio-button value="asian" name="asian" /> Asian</crowd-radio-button>
                <crowd-radio-button value="hispanic" name="hispanic" /> Hispanic</crowd-radio-button>
                <crowd-radio-button value="raceOther" name="raceOther" /> Other</crowd-radio-button>
            </crowd-radio-group>
        </div>

        <p class="question">Educational Attainment</p>
        <div class="answer education">
            <crowd-radio-group>
                <crowd-radio-button value="middleschool" name="middleschool" /> Middle School</crowd-radio-button>
                <crowd-radio-button value="highschool" name="highschool" /> High School</crowd-radio-button>
                <crowd-radio-button value="bachelor" name="bachelor" /> Bachelor</crowd-radio-button>
                <crowd-radio-button value="graduate" name="graduate" /> Graduate</crowd-radio-button>
                <crowd-radio-button value="eduOther" name="eduOther" /> Other</crowd-radio-button>
            </crowd-radio-group>
        </div>

        <p class="question">Region</p>
        <div class="answer region">
            <crowd-radio-group>
                <crowd-radio-button value="northeast" name="northeast" /> Northeast</crowd-radio-button>
                <crowd-radio-button value="midwest" name="midwest" /> Midwest</crowd-radio-button>
                <crowd-radio-button value="south" name="south" /> South</crowd-radio-button>
                <crowd-radio-button value="west" name="west" /> West</crowd-radio-button>
            </crowd-radio-group>
        </div>

        <p class="question">How often do you see or use charts?</p>
        <div class="answer freq">
            <crowd-radio-group>
                <crowd-radio-button value="never" name="never"/> Never</crowd-radio-button>
                <crowd-radio-button value="rarely" name="rarely" /> Rarely (less than once a month)</crowd-radio-button>
                <crowd-radio-button value="sometimes" name="sometimes" /> Sometimes (1-5 times/month)</crowd-radio-button>
                <crowd-radio-button value="often" name="often" /> Often (1 - 5 times/week)</crowd-radio-button>
                <crowd-radio-button value="veryoften" name="veryoften" /> Very often (about everyday)</crowd-radio-button>
            </crowd-radio-group>
        </div>
        <br>

        <p class="question">How familiar are you with Voting Turnout?</p>
        <div class="answer fam1">
            <crowd-radio-group>
                <crowd-radio-button value="not" name="familiarVote1"/> Not familiar</crowd-radio-button>
                <crowd-radio-button value="somewhat" name="familiarVote2" /> Somewhat Familiar</crowd-radio-button>
                <crowd-radio-button value="very" name="familiarVote3" /> Very Familiar</crowd-radio-button>
            </crowd-radio-group>
        </div>
        <br>

        <p class="question">How familiar are you with National Budget?</p>
        <div class="answer fam2">
            <crowd-radio-group>
                <crowd-radio-button value="not" name="familiarBudget1"/> Not familiar</crowd-radio-button>
                <crowd-radio-button value="somewhat" name="familiarBudget2"/> Somewhat Familiar</crowd-radio-button>
                <crowd-radio-button value="very" name="familiarBudget3" /> Very Familiar</crowd-radio-button>
            </crowd-radio-group>
        </div>
        <br>

        <p class="question">How familiar are you with Death Causes in the US?</p>
        <div class="answer fam3">
            <crowd-radio-group>
                <crowd-radio-button value="not" name="familiarDeath1"/> Not familiar</crowd-radio-button>
                <crowd-radio-button value="somewhat" name="familiarDeath2" /> Somewhat Familiar</crowd-radio-button>
                <crowd-radio-button value="very" name="familiarDeath3" /> Very Familiar</crowd-radio-button>
            </crowd-radio-group>
        </div>
        <br>

        <p>Your answers will automatically be recorded after you hit the submit button. Thank you for participating in our experiment.</p>
        <div style="float:right;">
            <crowd-button form-action="submit">Submit</crowd-button>
        </div>

        <script>
            function validateRadioButtons(radios)
            {
                for (var i = 0, length = radios.length; i < length; i++) {
                    if (radios[i].checked) {
                        return true;
                    }
                }
                errorBox.innerHTML = '<crowd-alert type="error" dismissible>Please select one button for each question.</crowd-alert>';
                errorBox.scrollIntoView();
                return false;
            }

            console.log();

            document.querySelector('crowd-form').onsubmit = function(e ) {
                var gender = [].slice.call(document.querySelectorAll('.gender crowd-radio-button'));
                var age = [].slice.call(document.querySelectorAll('.age crowd-radio-button'));
                var region = [].slice.call(document.querySelectorAll('.region crowd-radio-button'));
                var education = [].slice.call(document.querySelectorAll('.education crowd-radio-button'));
                var freq = [].slice.call(document.querySelectorAll('.freq crowd-radio-button'));
                var fam1 = [].slice.call(document.querySelectorAll('.fam1 crowd-radio-button'));
                var fam2 = [].slice.call(document.querySelectorAll('.fam2 crowd-radio-button'));
                var fam3 = [].slice.call(document.querySelectorAll('.fam3 crowd-radio-button'));
                var ethnic= [].slice.call(document.querySelectorAll('.ethnic crowd-radio-button'));

                if (validateRadioButtons(gender) && validateRadioButtons(age)
                    && validateRadioButtons(region)
                    && validateRadioButtons(education) && validateRadioButtons(freq)
                    && validateRadioButtons(fam1) && validateRadioButtons(fam2)
                    && validateRadioButtons(fam3) && validateRadioButtons(ethnic)){
                    return true;
                }
                return false;
            }
        </script>
    </div>

    <! –– NEXT BUTTON -->
    <div style="overflow:auto">
        <div style="float:right;">
            <crowd-button id="nextBtn" onclick="nextTab()">Next</crowd-button>
        </div>
    </div>

    <div class = "hiddenInput" style="display: none">
        <crowd-input style="visibility: hidden;" name="predict1" id="predict1" value="0"></crowd-input>
        <crowd-input style="visibility: hidden;" name="predict2" id="predict2" value="0"></crowd-input>
        <crowd-input style="visibility: hidden;" name="predict3" id="predict3" value="0"></crowd-input>

        <crowd-input style="visibility: hidden;" name="australia" id="australia" value=""></crowd-input>
        <crowd-input style="visibility: hidden;" name="belgium" id="belgium" value=""></crowd-input>
        <crowd-input style="visibility: hidden;" name="canada" id="canada" value=""></crowd-input>
        <crowd-input style="visibility: hidden;" name="usa" id="usa" value=""></crowd-input>

        <crowd-input style="visibility: hidden;" name="education" id="education" value=""></crowd-input>
        <crowd-input style="visibility: hidden;"  name="health" id="health" value=""></crowd-input>
        <crowd-input style="visibility: hidden;" name="military" id="military" value=""></crowd-input>
        <crowd-input style="visibility: hidden;"  name="socialsecurity" id="socialsecurity" value=""></crowd-input>

        <crowd-input style="visibility: hidden;" name="accident" id="accident" value=""></crowd-input>
        <crowd-input style="visibility: hidden;"  name="alzheimer" id="alzheimer" value=""></crowd-input>
        <crowd-input style="visibility: hidden;" name="suicide" id="suicide" value=""></crowd-input>
        <crowd-input style="visibility: hidden;"  name="drug" id="drug" value=""></crowd-input>
    </div>

</crowd-form>
</body>
</html>